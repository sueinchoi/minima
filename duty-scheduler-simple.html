<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>병원 당직표 생성기 (간단 버전)</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        button { margin: 5px; padding: 8px 15px; cursor: pointer; }
        .danger { background: #e74c3c; color: white; border: none; border-radius: 4px; }
        .person-card { border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>병원 당직표 생성기</h1>

    <div>
        <input type="text" id="personName" placeholder="이름 입력">
        <button onclick="addPerson()">인원 추가</button>
    </div>

    <div id="personList"></div>

    <script>
        let people = [];

        function addPerson() {
            const name = document.getElementById('personName').value.trim();
            if (!name) {
                alert('이름을 입력하세요');
                return;
            }

            people.push({
                name: name,
                vacations: []
            });

            document.getElementById('personName').value = '';
            renderList();
        }

        function removePerson(index) {
            console.log('removePerson called:', index);
            if (confirm(people[index].name + ' 님을 삭제하시겠습니까?')) {
                people.splice(index, 1);
                renderList();
                alert('삭제되었습니다');
            }
        }

        function addVacation(personIndex) {
            const start = prompt('휴가 시작일 (1-20):');
            const end = prompt('휴가 종료일 (1-20):');

            if (start && end) {
                people[personIndex].vacations.push({
                    start: parseInt(start),
                    end: parseInt(end)
                });
                renderList();
            }
        }

        function removeVacation(personIndex, vacIndex) {
            console.log('removeVacation called:', personIndex, vacIndex);
            if (confirm('이 휴가를 삭제하시겠습니까?')) {
                people[personIndex].vacations.splice(vacIndex, 1);
                renderList();
                alert('휴가가 삭제되었습니다');
            }
        }

        function renderList() {
            const listDiv = document.getElementById('personList');
            let html = '<h2>등록된 인원 (' + people.length + '명)</h2>';

            people.forEach((person, index) => {
                html += '<div class="person-card">';
                html += '<h3>' + person.name + '</h3>';

                // Vacations
                if (person.vacations.length > 0) {
                    html += '<div><strong>휴가:</strong></div>';
                    person.vacations.forEach((vac, vIdx) => {
                        html += '<div>';
                        html += 'Day ' + vac.start + ' ~ ' + vac.end + ' ';
                        html += '<button class="danger" onclick="removeVacation(' + index + ', ' + vIdx + ')">삭제</button>';
                        html += '</div>';
                    });
                }

                html += '<button onclick="addVacation(' + index + ')">휴가 추가</button> ';
                html += '<button class="danger" onclick="removePerson(' + index + ')">인원 삭제</button>';
                html += '</div>';
            });

            listDiv.innerHTML = html;
        }

        // Initialize
        renderList();

        // Add test data
        people = [
            { name: '김나영', vacations: [{start: 5, end: 10}] },
            { name: '이현규', vacations: [] }
        ];
        renderList();
    </script>
</body>
</html>
